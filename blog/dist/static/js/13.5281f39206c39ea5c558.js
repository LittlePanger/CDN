webpackJsonp([13],{Qgbg:function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var s={data:function(){return{formData:new FormData,imgs:{},imgLen:0}},methods:{addImg:function(t){var i=this.$refs.inputer;this.fil=i.files;var e=this.imgLen;if(this.fil.length+e>4)return alert("最多可上传4张，您还可以上传"+(4-e)+"张"),!1;for(var s=0;s<this.fil.length;s++){if(Math.floor(this.fil[s].size/1024)>5242880)return alert("请选择5M以内的图片！"),!1;this.imgLen++,this.$set(this.imgs,this.fil[s].name+"?"+(new Date).getTime()+s,this.fil[s])}console.log(this.imgs)},getObjectURL:function(t){var i=null;return void 0!=window.createObjectURL?i=window.createObjectURL(t):void 0!=window.URL?i=window.URL.createObjectURL(t):void 0!=window.webkitURL&&(i=window.webkitURL.createObjectURL(t)),i},delImg:function(t){this.$delete(this.imgs,t),this.imgLen--},submit:function(){var t=this;for(var i in this.imgs){var e=i.split("?")[0];this.formData.append("multipartFiles",this.imgs[i],e)}this.$http.post("/opinion/feedback",this.formData,{headers:{"Content-Type":"multipart/form-data"}}).then(function(i){t.alertShow=!0})}}},a={render:function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"form-group"},[e("label",{staticClass:"control-label"},[t._v("上传图片")]),t._v(" "),e("div",{staticClass:"control-form"},[e("p",{staticClass:"help-block"},[t._v("(建议图片格式为：JPEG/BMP/PNG/GIF，大小不超过5M，最多可上传4张)")]),t._v(" "),e("ul",{staticClass:"upload-imgs"},[t.imgLen>=4?t._e():e("li",[e("input",{ref:"inputer",staticClass:"upload",attrs:{type:"file",multiple:"",accept:"image/png,image/jpeg,image/gif,image/jpg"},on:{change:t.addImg}}),t._v(" "),t._m(0)]),t._v(" "),t._l(t.imgs,function(i,s){return e("li",[e("p",{staticClass:"img"},[e("img",{attrs:{src:t.getObjectURL(i)}}),e("a",{staticClass:"close",on:{click:function(i){return t.delImg(s)}}},[t._v("×")])])])})],2)])])},staticRenderFns:[function(){var t=this.$createElement,i=this._self._c||t;return i("a",{staticClass:"add"},[i("i",{staticClass:"iconfont icon-plus"}),i("p",[this._v("点击上传")])])}]};var n=e("C7Lr")(s,a,!1,function(t){e("S0xn")},"data-v-1ade932e",null);i.default=n.exports},S0xn:function(t,i){}});
//# sourceMappingURL=13.5281f39206c39ea5c558.js.map