{"version":3,"sources":["webpack:///src/page/test/test.vue","webpack:///./src/page/test/test.vue?f973","webpack:///./src/page/test/test.vue"],"names":["test","data","formData","FormData","imgs","imgLen","methods","addImg","event","inputDOM","this","$refs","inputer","fil","files","oldLen","length","alert","i","Math","floor","size","$set","name","Date","getTime","console","log","getObjectURL","file","url","undefined","window","createObjectURL","URL","webkitURL","delImg","key","$delete","submit","_this","split","append","$http","post","headers","Content-Type","then","res","alertShow","test_test","render","_vm","_h","$createElement","_c","_self","staticClass","_v","_e","ref","attrs","type","multiple","accept","on","change","_m","_l","value","src","click","$event","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"sGAmBA,IAAAA,GACAC,KADA,WAEA,OACAC,SAAA,IAAAC,SACAC,QACAC,OAAA,IAGAC,SACAC,OADA,SACAC,GACA,IAAAC,EAAAC,KAAAC,MAAAC,QAEAF,KAAAG,IAAAJ,EAAAK,MACA,IAAAC,EAAAL,KAAAL,OAEA,GADAK,KAAAG,IAAAG,OAAAD,EACA,EAEA,OADAE,MAAA,oBAAAF,GAAA,MACA,EAEA,QAAAG,EAAA,EAAAA,EAAAR,KAAAG,IAAAG,OAAAE,IAAA,CAEA,GADAC,KAAAC,MAAAV,KAAAG,IAAAK,GAAAG,KAAA,MACA,QAEA,OADAJ,MAAA,gBACA,EAEAP,KAAAL,SACAK,KAAAY,KAAAZ,KAAAN,KAAAM,KAAAG,IAAAK,GAAAK,KAAA,SAAAC,MAAAC,UAAAP,EAAAR,KAAAG,IAAAK,IAGAQ,QAAAC,IAAAjB,KAAAN,OAEAwB,aAvBA,SAuBAC,GACA,IAAAC,EAAA,KAQA,YAPAC,GAAAC,OAAAC,gBACAH,EAAAE,OAAAC,gBAAAJ,QACAE,GAAAC,OAAAE,IACAJ,EAAAE,OAAAE,IAAAD,gBAAAJ,QACAE,GAAAC,OAAAG,YACAL,EAAAE,OAAAG,UAAAF,gBAAAJ,IAEAC,GAEAM,OAlCA,SAkCAC,GACA3B,KAAA4B,QAAA5B,KAAAN,KAAAiC,GACA3B,KAAAL,UAEAkC,OAtCA,WAsCA,IAAAC,EAAA9B,KACA,QAAA2B,KAAA3B,KAAAN,KAAA,CACA,IAAAmB,EAAAc,EAAAI,MAAA,QACA/B,KAAAR,SAAAwC,OAAA,iBAAAhC,KAAAN,KAAAiC,GAAAd,GAEAb,KAAAiC,MAAAC,KAAA,oBAAAlC,KAAAR,UACA2C,SAAAC,eAAA,yBACAC,KAAA,SAAAC,GACAR,EAAAS,WAAA,OCtEeC,GADEC,OAFjB,WAA0B,IAAAC,EAAA1C,KAAa2C,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBE,YAAA,eAAyBF,EAAA,SAAcE,YAAA,kBAA4BL,EAAAM,GAAA,UAAAN,EAAAM,GAAA,KAAAH,EAAA,OAAyCE,YAAA,iBAA2BF,EAAA,KAAUE,YAAA,eAAyBL,EAAAM,GAAA,gDAAAN,EAAAM,GAAA,KAAAH,EAAA,MAA8EE,YAAA,gBAA0BL,EAAA/C,QAAA,EAA0M+C,EAAAO,KAA1MJ,EAAA,MAAAA,EAAA,SAAsDK,IAAA,UAAAH,YAAA,SAAAI,OAA0CC,KAAA,OAAAC,SAAA,GAAAC,OAAA,4CAAgFC,IAAKC,OAAAd,EAAA7C,UAAqB6C,EAAAM,GAAA,KAAAN,EAAAe,GAAA,KAAAf,EAAAM,GAAA,KAAAN,EAAAgB,GAAAhB,EAAA,cAAAiB,EAAAhC,GAAqF,OAAAkB,EAAA,MAAAA,EAAA,KAAwBE,YAAA,QAAkBF,EAAA,OAAYM,OAAOS,IAAAlB,EAAAxB,aAAAyC,MAA+Bd,EAAA,KAAUE,YAAA,QAAAQ,IAAwBM,MAAA,SAAAC,GAAyB,OAAApB,EAAAhB,OAAAC,OAAyBe,EAAAM,GAAA,cAAoB,QAE90Be,iBADjB,WAAoC,IAAapB,EAAb3C,KAAa4C,eAA0BC,EAAvC7C,KAAuC8C,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,KAAeE,YAAA,QAAkBF,EAAA,KAAUE,YAAA,uBAAiCF,EAAA,KAA3I7C,KAA2IgD,GAAA,eCE/K,IAcAgB,EAdyBC,EAAQ,OAcjCC,CACE5E,EACAkD,GATF,EAVA,SAAA2B,GACEF,EAAQ,SAaV,kBAEA,MAUeG,EAAA,QAAAJ,EAAiB","file":"static/js/13.5281f39206c39ea5c558.js","sourcesContent":["<template>\n  <div class=\"form-group\">\n    <label class=\"control-label\">上传图片</label>\n    <div class=\"control-form\">\n      <p class=\"help-block\">(建议图片格式为：JPEG/BMP/PNG/GIF，大小不超过5M，最多可上传4张)</p>\n      <ul class=\"upload-imgs\">\n        <li v-if=\"imgLen>=4 ? false : true\">\n          <input type=\"file\" class=\"upload\" @change=\"addImg\" ref=\"inputer\" multiple accept=\"image/png,image/jpeg,image/gif,image/jpg\"/>\n          <a class=\"add\"><i class=\"iconfont icon-plus\"></i><p>点击上传</p></a>\n        </li>\n        <li v-for='(value, key) in imgs'>\n          <p class=\"img\"><img :src=\"getObjectURL(value)\"><a class=\"close\" @click=\"delImg(key)\">×</a></p>\n        </li>\n      </ul>\n    </div>\n  </div>\n</template>\n\n<script>\n  export default {\n    data() {\n      return {\n        formData:new FormData(),\n        imgs: {},\n        imgLen:0,\n      }\n    },\n    methods: {\n      addImg(event){\n        let inputDOM = this.$refs.inputer;\n        // 通过DOM取文件数据\n        this.fil = inputDOM.files;\n        let oldLen=this.imgLen;\n        let len=this.fil.length+oldLen;\n        if(len>4){\n          alert('最多可上传4张，您还可以上传'+(4-oldLen)+'张');\n          return false;\n        }\n        for (let i=0; i < this.fil.length; i++) {\n          let size = Math.floor(this.fil[i].size / 1024);\n          if (size > 5*1024*1024) {\n            alert('请选择5M以内的图片！');\n            return false\n          }\n          this.imgLen++;\n          this.$set(this.imgs,this.fil[i].name+'?'+new Date().getTime()+i,this.fil[i]);\n\n        }\n        console.log(this.imgs)\n      },\n      getObjectURL(file) {\n        var url = null ;\n        if (window.createObjectURL!=undefined) { // basic\n          url = window.createObjectURL(file) ;\n        } else if (window.URL!=undefined) { // mozilla(firefox)\n          url = window.URL.createObjectURL(file) ;\n        } else if (window.webkitURL!=undefined) { // webkit or chrome\n          url = window.webkitURL.createObjectURL(file) ;\n        }\n        return url ;\n      },\n      delImg(key){\n        this.$delete(this.imgs,key);\n        this.imgLen--;\n      },\n      submit(){\n        for(let key in this.imgs){\n          let name=key.split('?')[0];\n          this.formData.append('multipartFiles',this.imgs[key],name);\n        }\n        this.$http.post('/opinion/feedback', this.formData,{\n          headers: {'Content-Type': 'multipart/form-data'}\n        }).then(res => {\n          this.alertShow=true;\n        });\n      },\n    }\n  }\n</script>\n\n<style scoped>\n  .upload-imgs{margin: 10px 0 30px 0;overflow: hidden;font-size: 0;}\n  .upload-imgs li{position: relative;width: 118px;height: 118px;font-size: 14px;display: inline-block;padding: 10px;margin-right: 25px;border: 2px dashed #ccc;text-align: center;vertical-align: middle;}\n  .upload-imgs li:hover{border-color: $them-color;}\n  .upload-imgs .add{display: block;background-color: #ccc;color: #ffffff;height: 94px;padding: 8px 0;}\n  .upload-imgs .add .iconfont{padding: 10px 0;font-size: 40px;}\n  .upload-imgs li:hover .add{background-color: $them-color;}\n  .upload-imgs li .upload{position: absolute;top: 0;bottom: 0;left: 0;right: 0;width: 118px;height: 118px;}\n  .upload-imgs .img{position: relative;width: 94px;height: 94px;line-height: 94px;}\n  .upload-imgs .img img{vertical-align: middle;}\n  .upload-imgs .img .close{display: none;}\n  .upload-imgs li:hover .img .close{display: block;position: absolute;right: -6px;top: -10px;line-height: 1;font-size: 22px;color: #aaa;}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/page/test/test.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"form-group\"},[_c('label',{staticClass:\"control-label\"},[_vm._v(\"上传图片\")]),_vm._v(\" \"),_c('div',{staticClass:\"control-form\"},[_c('p',{staticClass:\"help-block\"},[_vm._v(\"(建议图片格式为：JPEG/BMP/PNG/GIF，大小不超过5M，最多可上传4张)\")]),_vm._v(\" \"),_c('ul',{staticClass:\"upload-imgs\"},[(_vm.imgLen>=4 ? false : true)?_c('li',[_c('input',{ref:\"inputer\",staticClass:\"upload\",attrs:{\"type\":\"file\",\"multiple\":\"\",\"accept\":\"image/png,image/jpeg,image/gif,image/jpg\"},on:{\"change\":_vm.addImg}}),_vm._v(\" \"),_vm._m(0)]):_vm._e(),_vm._v(\" \"),_vm._l((_vm.imgs),function(value,key){return _c('li',[_c('p',{staticClass:\"img\"},[_c('img',{attrs:{\"src\":_vm.getObjectURL(value)}}),_c('a',{staticClass:\"close\",on:{\"click\":function($event){return _vm.delImg(key)}}},[_vm._v(\"×\")])])])})],2)])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('a',{staticClass:\"add\"},[_c('i',{staticClass:\"iconfont icon-plus\"}),_c('p',[_vm._v(\"点击上传\")])])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-1ade932e\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/page/test/test.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-1ade932e\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=styles&index=0!./test.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./test.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./test.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-1ade932e\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./test.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-1ade932e\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/page/test/test.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}